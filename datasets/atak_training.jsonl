{"instruction": "Create a Kotlin class for an ATAK plugin that implements a `CotDispatcher.CotEventListener`. The listener should filter for CoT events with the type 'a-f-G-U-C' (Friendly Ground Unit Combatant), extract the callsign from the detail block, and log the latitude and longitude.", "output": "import com.atakmap.coremap.cot.event.CotDetail\nimport com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.comms.CotDispatcher\nimport com.atakmap.coremap.log.Log\n\nclass FriendlyUnitListener : CotDispatcher.CotEventListener {\n\n    companion object {\n        private const val TAG = \"FriendlyUnitListener\"\n        private const val TARGET_TYPE = \"a-f-G-U-C\"\n    }\n\n    override fun onCotEvent(event: CotEvent) {\n        if (event.type == TARGET_TYPE) {\n            val point: CotPoint? = event.point\n            val detail: CotDetail? = event.detail\n            \n            // Extract Callsign from the 'contact' detail child\n            val callsign = detail?.getFirstChildByName(\"contact\")?.getAttribute(\"callsign\") ?: \"Unknown\"\n\n            if (point != null) {\n                Log.d(TAG, \"Detected Friendly: $callsign at Lat: ${point.lat}, Lon: ${point.lon}\")\n            }\n        }\n    }\n}"}
{"instruction": "Write a Java method to programmatically create a 'Hostile' Red Marker on the ATAK MapView at specific coordinates. The marker should be added to the Root MapGroup.", "output": "import com.atakmap.android.maps.MapGroup;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport java.util.UUID;\n\npublic void spawnHostileMarker(MapView mapView, double lat, double lon) {\n    // Create a unique identifier for the marker\n    String uid = UUID.randomUUID().toString();\n    \n    // Create the marker object with the point and UID\n    Marker hostileMarker = new Marker(new GeoPoint(lat, lon), uid);\n    \n    // Set the CoT type to Hostile Ground Unit (affects icon rendering)\n    hostileMarker.setType(\"a-h-G\");\n    \n    // Set the label/title\n    hostileMarker.setTitle(\"Target Alpha\");\n    \n    // Set the icon state (ready/visible)\n    hostileMarker.setMetaString(\"how\", \"h-g-i-g-o\");\n    hostileMarker.setMetaBoolean(\"editable\", true);\n    hostileMarker.setMetaBoolean(\"movable\", true);\n\n    // Add to the Root MapGroup to render it on the map layer\n    MapGroup rootGroup = mapView.getRootGroup();\n    rootGroup.addItem(hostileMarker);\n}"}
{"instruction": "Generate a Kotlin code snippet to construct a raw CoT XML message for a 'Sensor Trigger' event. The event should include a custom detail block named 'sensor_data' with a 'battery' attribute, and then dispatch it using the internal ATAK dispatcher.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.cot.event.CotDetail\nimport com.atakmap.coremap.maps.time.CoTTime\nimport com.atakmap.android.cot.CotMapComponent\n\nfun broadcastSensorEvent(lat: Double, lon: Double, batteryLevel: Int) {\n    val event = CotEvent()\n    \n    // Standard CoT Attributes\n    event.version = \"2.0\"\n    event.uid = \"Sensor-001\"\n    event.type = \"b-m-p-s-p-loc\" // Bit-mapped sensor point\n    event.time = CoTTime()\n    event.start = CoTTime()\n    event.stale = CoTTime(System.currentTimeMillis() + 60000) // Stale in 1 min\n    event.how = \"m-g\"\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n\n    // Create Custom Detail\n    val sensorDetail = CotDetail(\"sensor_data\")\n    sensorDetail.setAttribute(\"battery\", batteryLevel.toString())\n    sensorDetail.setAttribute(\"status\", \"active\")\n    \n    // Add to event detail\n    val rootDetail = event.detail ?: CotDetail(\"detail\")\n    rootDetail.addChild(sensorDetail)\n    event.detail = rootDetail\n\n    // Dispatch to internal system and external outputs\n    CotMapComponent.getInternalDispatcher().dispatch(event)\n    CotMapComponent.getExternalDispatcher().dispatch(event)\n}"}
{"instruction": "Create a Java class that extends `Polyline` to draw a tactical corridor (Route) on the map. The constructor should take a list of `GeoPoint` objects and set the stroke color to blue and weight to 5.", "output": "import com.atakmap.android.maps.Polyline;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport android.graphics.Color;\nimport java.util.UUID;\nimport java.util.List;\n\npublic class TacticalCorridor extends Polyline {\n\n    public TacticalCorridor(List<GeoPoint> points) {\n        // Initialize with a random UUID\n        super(UUID.randomUUID().toString());\n        \n        // Set the points for the line\n        this.setPoints(points);\n        \n        // Visual Styling\n        this.setStrokeColor(Color.BLUE);\n        this.setStrokeWeight(5.0d);\n        this.setClickable(true);\n        this.setTitle(\"Blue Force Route\");\n        \n        // Ensure it is treated as a line, not a closed polygon\n        this.setClosed(false);\n        \n        // Set metadata for persistence if needed\n        this.setMetaBoolean(\"archive\", true);\n    }\n}"}
{"instruction": "Write a Kotlin function that parses an incoming byte array (simulating a tactical radio stream) containing a custom binary format [ID, LAT, LON] and converts it into a CoT Event.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.maps.time.CoTTime\nimport java.nio.ByteBuffer\n\nfun parseRadioDataToCot(data: ByteArray): CotEvent? {\n    if (data.size < 24) return null // Ensure enough bytes for ID(8) + Lat(8) + Lon(8)\n\n    val buffer = ByteBuffer.wrap(data)\n    \n    // Read simulated binary structure\n    val unitId = buffer.long\n    val lat = buffer.double\n    val lon = buffer.double\n\n    // Construct CoT\n    val event = CotEvent()\n    event.uid = \"RadioUnit-$unitId\"\n    event.type = \"a-f-G-U-C-I\" // Infantry\n    event.time = CoTTime()\n    event.start = CoTTime()\n    event.stale = CoTTime(System.currentTimeMillis() + 30000)\n    event.how = \"m-r\" // Machine-reported\n    \n    // Set location (HAE and CE/LE assumed 0 for this example)\n    event.point = CotPoint(lat, lon, 0.0, 0.0, 0.0)\n\n    return event\n}"}
{"instruction": "Create a Java class implementing `CotDispatcher.CotEventListener` for an ATAK plugin. The listener must filter incoming Cursor-on-Target events to only process Hostile Ground units (type starting with 'a-h-G'). If a match is found, extract the `CotPoint` and log the latitude and longitude.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.coremap.cot.event.CotPoint;\nimport com.atakmap.comms.CotDispatcher;\nimport com.atakmap.coremap.log.Log;\n\npublic class HostileUnitListener implements CotDispatcher.CotEventListener {\n\n    private static final String TAG = \"HostileUnitListener\";\n\n    @Override\n    public void onCotEvent(CotEvent event) {\n        // Check if event is valid and matches the Hostile Ground atom type\n        if (event != null && event.getType() != null && event.getType().startsWith(\"a-h-G\")) {\n            CotPoint point = event.getPoint();\n            if (point != null) {\n                double lat = point.getLat();\n                double lon = point.getLon();\n                double ce = point.getCe(); // Circular Error\n                \n                Log.d(TAG, String.format(\"Detected Hostile: Lat=%f, Lon=%f, CE=%f\", lat, lon, ce));\n                \n                // TODO: Trigger UI update or alert here\n            }\n        }\n    }\n}"}
{"instruction": "Write a Kotlin function for a CivTAK plugin that parses the `detail` section of a `CotEvent`. The function should look for a custom XML tag `<sensor_data>` and extract the `battery` attribute value.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotDetail\n\nfun extractSensorBatteryLevel(event: CotEvent): String? {\n    val detail: CotDetail? = event.detail\n    if (detail != null) {\n        // Locate the specific child tag in the detail block\n        val sensorDataNode: CotDetail? = detail.getFirstChildByName(0, \"sensor_data\")\n        \n        if (sensorDataNode != null) {\n            // Extract the attribute 'battery'\n            return sensorDataNode.getAttribute(\"battery\")\n        }\n    }\n    return null\n}"}
{"instruction": "Develop a Java method to programmatically add a `Marker` (icon) to the ATAK MapView. The marker should be placed at a specific GeoPoint, use the 'self' type, and be added to the Root Map Group.", "output": "import com.atakmap.android.maps.Marker;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.MapGroup;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.icons.UserIcon;\nimport java.util.UUID;\n\npublic void addSelfMarker(MapView mapView, GeoPoint location) {\n    // Create a unique UID for the marker\n    String uid = UUID.randomUUID().toString();\n    \n    // Instantiate the marker\n    Marker marker = new Marker(location, uid);\n    \n    // Set standard CoT type (e.g., self/friendly ground)\n    marker.setType(\"a-f-G-U-C\");\n    marker.setTitle(\"Plugin User\");\n    \n    // Set the icon (using default ATAK icon path or resource)\n    marker.setIcon(new UserIcon.Builder().setImageUri(0, \"asset://icons/default_icon.png\").build());\n    \n    // Add to the MapView's root group to render it\n    MapGroup rootGroup = mapView.getRootGroup();\n    if (rootGroup != null) {\n        rootGroup.addItem(marker);\n    }\n}"}
{"instruction": "Create a Kotlin class that handles a simple Tactical Data Link task: Serializing a `CotEvent` to a String and broadcasting it via UDP to a multicast address (239.2.3.1:6969).", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.GlobalScope\nimport kotlinx.coroutines.launch\nimport java.net.DatagramPacket\nimport java.net.DatagramSocket\nimport java.net.InetAddress\n\nclass UdpCotSender {\n\n    private val multicastIp = \"239.2.3.1\"\n    private val port = 6969\n\n    fun broadcastCot(event: CotEvent) {\n        GlobalScope.launch(Dispatchers.IO) {\n            try {\n                // Serialize CoT to String\n                val xmlData = event.toString()\n                val buffer = xmlData.toByteArray(Charsets.UTF_8)\n\n                // Prepare UDP Packet\n                val address = InetAddress.getByName(multicastIp)\n                val packet = DatagramPacket(buffer, buffer.size, address, port)\n\n                // Send\n                val socket = DatagramSocket()\n                socket.send(packet)\n                socket.close()\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n        }\n    }\n}"}
{"instruction": "Write a Java code snippet to draw a red 'Range Ring' (Circle) on the ATAK map. The circle should have a radius of 1000 meters centered on a provided GeoPoint.", "output": "import com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.MapGroup;\nimport com.atakmap.android.drawing.mapItems.DrawingCircle;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport android.graphics.Color;\n\npublic void drawRangeRing(MapView mapView, GeoPoint center) {\n    // Create the circle object\n    DrawingCircle rangeRing = new DrawingCircle(center, 1000.0); // Radius in meters\n    \n    // Style the circle\n    rangeRing.setStrokeColor(Color.RED);\n    rangeRing.setStrokeWeight(3.0f);\n    rangeRing.setFillColor(Color.argb(50, 255, 0, 0)); // Semi-transparent red fill\n    rangeRing.setTitle(\"Tactical Range Ring\");\n    \n    // Add to the map\n    MapGroup rootGroup = mapView.getRootGroup();\n    if (rootGroup != null) {\n        rootGroup.addItem(rangeRing);\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin `MapComponent` that logs a message when the plugin is created and destroyed.", "output": "package com.atakmap.android.helloworld.plugin\n\nimport android.content.Context\nimport android.content.Intent\nimport com.atakmap.android.maps.MapComponent\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.log.Log\n\nclass HelloWorldMapComponent : MapComponent {\n\n    override fun onCreate(context: Context, intent: Intent, view: MapView) {\n        Log.d(TAG, \"HelloWorld Plugin Created\")\n        // Initialize plugin logic here (e.g., register receivers, add map items)\n    }\n\n    override fun onDestroy(context: Context, view: MapView) {\n        Log.d(TAG, \"HelloWorld Plugin Destroyed\")\n        // Clean up resources\n    }\n\n    override fun onStart(context: Context, view: MapView) {}\n    override fun onStop(context: Context, view: MapView) {}\n    override fun onPause(context: Context, view: MapView) {}\n    override fun onResume(context: Context, view: MapView) {}\n\n    companion object {\n        private const val TAG = \"HelloWorldMapComponent\"\n    }\n}"}
{"instruction": "Implement an ATAK `DropDownReceiver` to handle the UI display of a plugin tool. This code sets up the receiver to show a custom layout when the tool is activated.", "output": "package com.atakmap.android.helloworld.plugin\n\nimport android.content.Context\nimport android.content.Intent\nimport android.view.LayoutInflater\nimport android.view.View\nimport com.atak.plugins.impl.PluginLayoutInflater\nimport com.atakmap.android.dropdown.DropDownReceiver\nimport com.atakmap.android.maps.MapView\n\nclass HelloWorldDropDownReceiver(private val mapView: MapView, private val context: Context) : \n    DropDownReceiver(mapView) {\n\n    override fun onReceive(context: Context, intent: Intent) {\n        // Show the DropDown when the intent matches our tool\n        if (intent.action == SHOW_PLUGIN) {\n            if (!isClosed) {\n                closeDropDown()\n            } else {\n                showDropDown(createView(), HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT)\n            }\n        }\n    }\n\n    private fun createView(): View {\n        val inflater = PluginLayoutInflater.from(context)\n        return inflater.inflate(R.layout.plugin_layout, null)\n    }\n\n    override fun disposeImpl() {\n        // Cleanup resources\n    }\n\n    companion object {\n        const val SHOW_PLUGIN = \"com.atakmap.android.helloworld.SHOW_PLUGIN\"\n    }\n}"}
{"instruction": "Create a `Tool` class for an ATAK plugin. This defines the button that appears in the ATAK toolbar/radial menu.", "output": "package com.atakmap.android.helloworld.plugin\n\nimport android.content.Intent\nimport com.atakmap.android.ipc.AtakBroadcast\nimport com.atakmap.android.tools.Tool\nimport com.atakmap.android.tools.ToolDescriptor\n\nclass HelloWorldTool(context: android.content.Context) : Tool, ToolDescriptor {\n\n    private val context = context\n\n    override fun getDescription(): String {\n        return \"HelloWorld Plugin Tool\"\n    }\n\n    override fun getIcon(): android.graphics.drawable.Drawable? {\n        // Return the drawable for the toolbar icon\n        return context.getDrawable(R.drawable.ic_launcher)\n    }\n\n    override fun getShortDescription(): String {\n        return \"Hello\"\n    }\n\n    override fun getToolIdentifier(): String {\n        return \"helloworld_tool\"\n    }\n\n    override fun onToolClicked() {\n        // Broadcast intent to open the DropDownReceiver\n        val intent = Intent(\"com.atakmap.android.helloworld.SHOW_PLUGIN\")\n        AtakBroadcast.getInstance().sendBroadcast(intent)\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) ToolDescriptor to register a plugin tool in the toolbar.", "output": "import com.atakmap.android.ipc.AtakBroadcast.DocumentedIntentFilter;\nimport com.atakmap.android.plugintool.PluginTool;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.drawable.Drawable;\nimport com.atak.plugins.impl.PluginContext;\n\npublic class MyPluginToolDescriptor extends PluginTool {\n\n    private final Context context;\n\n    public MyPluginToolDescriptor(Context context) {\n        super(context,\n                \"My Plugin Tool\", // Text Label\n                \"Open My Plugin\", // Tooltip\n                context.getResources().getDrawable(R.drawable.ic_launcher), // Icon\n                \"com.atakmap.android.myplugin.SHOW_TOOL\"); // Broadcast Action\n        this.context = context;\n        PluginContext.setContext(context);\n    }\n\n    @Override\n    public Drawable getIcon() {\n        return context.getResources().getDrawable(R.drawable.ic_launcher);\n    }\n}"}
{"instruction": "Implement an ATAK DropDownReceiver to display a native view when a plugin tool is activated.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport com.atakmap.android.dropdown.DropDown.OnStateListener;\nimport com.atakmap.android.dropdown.DropDownReceiver;\nimport com.atakmap.android.maps.MapView;\n\npublic class MyDropDownReceiver extends DropDownReceiver implements OnStateListener {\n    private final View templateView;\n    private final Context pluginContext;\n\n    public MyDropDownReceiver(MapView mapView, Context pluginContext) {\n        super(mapView);\n        this.pluginContext = pluginContext;\n        // Inflate the view from the plugin's context\n        LayoutInflater inflater = LayoutInflater.from(pluginContext);\n        this.templateView = inflater.inflate(R.layout.my_plugin_view, null);\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (!isClosed()) {\n            closeDropDown();\n        } else {\n            showDropDown(templateView, HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT, this);\n        }\n    }\n\n    @Override\n    public void disposeImpl() {\n        // Cleanup resources\n    }\n\n    @Override\n    public void onDropDownSelectionRemoved() {\n        // Handle closing logic\n    }\n\n    @Override\n    public void onDropDownVisible(boolean v) {\n    }\n\n    @Override\n    public void onDropDownSizeChanged(double width, double height) {\n    }\n\n    @Override\n    public void onDropDownClose() {\n    }\n}"}
{"instruction": "Programmatically add a red marker to the map in an ATAK plugin.", "output": "import com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.maps.MapGroup;\n\npublic void addRedMarker(MapView mapView, GeoPoint point) {\n    // Create a new Marker\n    Marker marker = new Marker(point, java.util.UUID.randomUUID().toString());\n    \n    // Set marker properties\n    marker.setType(\"a-f-G-U-C\"); // Standard MIL-STD-2525 type\n    marker.setTitle(\"Target Alpha\");\n    marker.setMetaString(\"color\", \"-65536\"); // ARGB for Red\n    \n    // Add to the map's Root Group\n    MapGroup rootGroup = mapView.getRootGroup();\n    rootGroup.addItem(marker);\n    \n    // Refresh to ensure visibility\n    marker.persist(mapView.getMapEventDispatcher(), null, this.getClass());\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin Lifecycle component in Kotlin that displays a Toast when the plugin is loaded.", "output": "package com.atakmap.android.plugin.hello\n\nimport android.content.Context\nimport android.widget.Toast\nimport com.atakmap.android.maps.MapCore\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.app.preferences.ToolsPreferenceFragment\nimport com.atakmap.coremap.log.Log\nimport is.arontibo.library.ElasticDownloadView\nimport com.atakmap.android.dropdown.DropDownMapComponent\n\nclass HelloLifecycle : DropDownMapComponent() {\n\n    private var context: Context? = null\n    private var mapView: MapView? = null\n\n    override fun onCreate(context: Context, intent: android.content.Intent, view: MapView) {\n        super.onCreate(context, intent, view)\n        this.context = context\n        this.mapView = view\n        \n        Toast.makeText(context, \"Hello ATAK Plugin Loaded\", Toast.LENGTH_LONG).show()\n        Log.d(\"HelloLifecycle\", \"Plugin created\")\n    }\n\n    override fun onDestroyImpl(context: Context, view: MapView) {\n        super.onDestroyImpl(context, view)\n        Log.d(\"HelloLifecycle\", \"Plugin destroyed\")\n    }\n}"}
{"instruction": "Write an ATAK Kotlin snippet to add a custom Map Widget (text label) to the top-left corner of the MapView.", "output": "import android.graphics.Color\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.android.widgets.TextWidget\nimport com.atakmap.android.widgets.RootLayoutWidget\n\nfun addStatusWidget(mapView: MapView) {\n    val textWidget = TextWidget(\"Status: Active\", 1)\n    textWidget.color = Color.GREEN\n    textWidget.setTextSize(32f)\n    \n    // Get the root layout of the map\n    val rootLayout = mapView.componentExtra as? RootLayoutWidget\n    \n    // Add widget to top left (x=10, y=10)\n    rootLayout?.let {\n        it.addWidget(textWidget)\n        it.positionWidget(textWidget, 10f, 10f, RootLayoutWidget.TopLeft)\n    }\n}"}
{"instruction": "Implement an ATAK BroadcastReceiver in Kotlin to listen for a specific 'SHOW_PLUGIN_PANE' intent.", "output": "import android.content.BroadcastReceiver\nimport android.content.Context\nimport android.content.Intent\nimport android.util.Log\nimport com.atakmap.android.ipc.AtakBroadcast\n\nclass PluginReceiver : BroadcastReceiver() {\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (intent?.action == \"com.atakmap.android.plugin.SHOW_PLUGIN_PANE\") {\n            Log.d(\"PluginReceiver\", \"Received request to show plugin pane\")\n            // Logic to open DropDownReceiver or Toggle Tool would go here\n        }\n    }\n\n    fun register() {\n        AtakBroadcast.DocumentedIntentFilter(\"com.atakmap.android.plugin.SHOW_PLUGIN_PANE\")\n            .also { filter ->\n                AtakBroadcast.getInstance().registerReceiver(this, filter)\n            }\n    }\n\n    fun unregister() {\n        AtakBroadcast.getInstance().unregisterReceiver(this)\n    }\n}"}
{"instruction": "Write a Kotlin snippet for an ATAK plugin to programmatically add a red marker to the map at specific coordinates.", "output": "import com.atakmap.android.maps.Marker\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.maps.coords.GeoPoint\nimport com.atakmap.android.maps.MapGroup\n\nfun addRedMarker(mapView: MapView, lat: Double, lon: Double, title: String) {\n    // Create the point\n    val point = GeoPoint(lat, lon)\n    \n    // Create the marker\n    val marker = Marker(point, java.util.UUID.randomUUID().toString())\n    marker.title = title\n    marker.type = \"a-u-G\" // Atom, unit, Ground\n    marker.setMetaString(\"color\", \"-65536\") // Red integer color\n    marker.setMetaBoolean(\"readiness\", true)\n    marker.setMetaBoolean(\"archive\", true)\n    \n    // Add to the Root Group (displays immediately)\n    val rootGroup = mapView.rootGroup\n    rootGroup.addItem(marker)\n}"}
{"instruction": "Create a basic DropDownReceiver implementation for an ATAK plugin that inflates a layout file.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.LayoutInflater\nimport android.view.View\nimport com.atak.plugins.impl.PluginLayoutInflater\nimport com.atakmap.android.dropdown.DropDown.OnStateListener\nimport com.atakmap.android.dropdown.DropDownReceiver\nimport com.atakmap.android.maps.MapView\n\nclass MyPluginDropDownReceiver(val mapView: MapView, val context: Context) : \n    DropDownReceiver(mapView), OnStateListener {\n\n    private var templateView: View? = null\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (templateView == null) {\n            // Inflate the view from the plugin context\n            val inflater = LayoutInflater.from(this.context)\n            templateView = inflater.inflate(com.myplugin.R.layout.my_plugin_layout, null)\n        }\n\n        if (!isClosed) {\n            closeDropDown()\n        } else {\n            showDropDown(templateView, HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT, false)\n        }\n    }\n\n    override fun onDropDownSelectionRemoved() {\n        // Cleanup if necessary\n    }\n\n    override fun disposeImpl() {\n        templateView = null\n    }\n}"}
{"instruction": "Write a Kotlin function for an ATAK plugin to generate and dispatch a 'hostile' CoT (Cursor on Target) event at the user's self-location.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.android.cot.CotMapComponent\nimport com.atakmap.android.maps.MapView\n\nfun dispatchHostileCot(mapView: MapView) {\n    // Get Self Location\n    val selfMarker = mapView.selfMarker\n    val point = selfMarker.point\n\n    // Create Event\n    val cotEvent = CotEvent()\n    cotEvent.uid = java.util.UUID.randomUUID().toString()\n    cotEvent.type = \"a-h-G\" // Atom, Hostile, Ground\n    cotEvent.time = com.atakmap.coremap.maps.time.CoordinatedTime()\n    cotEvent.start = cotEvent.time\n    cotEvent.stale = cotEvent.time.addMinutes(10)\n    cotEvent.how = \"h-g-i-g-o\" // Human, GPS, Ins, GPS, Other\n    \n    // Set Point\n    cotEvent.point = CotPoint(point.latitude, point.longitude, point.hae, point.ce, point.le)\n\n    // Dispatch\n    CotMapComponent.getDispatcher().dispatch(cotEvent)\n}"}
{"instruction": "Create a Kotlin function for an ATAK (Android Team Awareness Kit) plugin that places a Marker (Red Icon) on the map at a specific coordinate.", "output": "import com.atakmap.android.maps.Marker\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.maps.coords.GeoPoint\nimport com.atakmap.android.icons.UserIcon\n\nfun addRedMarker(mapView: MapView, lat: Double, lon: Double, uid: String) {\n    val point = GeoPoint(lat, lon)\n    val marker = Marker(point, uid)\n    \n    // Set standard red icon path (internal ATAK resource)\n    marker.setMetaString(\"iconUri\", UserIcon.GetIconBitmapPath(UserIcon.IconColor.RED))\n    marker.type = \"a-u-G\"\n    marker.title = \"Plugin Marker\"\n    marker.setMetaBoolean(\"readiness\", true)\n    marker.setMetaBoolean(\"archive\", true)\n\n    // Add to the root group of the map\n    mapView.rootGroup.addItem(marker)\n}"}
{"instruction": "Write a Kotlin BroadcastReceiver for an ATAK plugin that listens for internal CoT (Cursor on Target) events.", "output": "import android.content.BroadcastReceiver\nimport android.content.Context\nimport android.content.Intent\nimport com.atakmap.coremap.cot.event.CotEvent\nimport android.util.Log\n\nclass CotEventListener : BroadcastReceiver() {\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (intent?.action == \"com.atakmap.android.cot.COT_EVENT\") {\n            val cotEvent = intent.getParcelableExtra<CotEvent>(\"com.atakmap.coremap.cot.event.CotEvent\")\n            if (cotEvent != null) {\n                Log.d(\"ATAK_PLUGIN\", \"Received CoT Event: ${cotEvent.type} from ${cotEvent.uid}\")\n                // Process the event (e.g., check if it is a hostile track)\n            }\n        }\n    }\n}"}
{"instruction": "Create a Kotlin layout inflater for an ATAK Plugin Tool that includes a Spinner (Dropdown).", "output": "import android.content.Context\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.widget.ArrayAdapter\nimport android.widget.Spinner\nimport com.atakmap.android.maps.MapView\n\nfun createPluginToolView(context: Context, mapView: MapView): View {\n    // Assuming a layout file named 'plugin_tool_layout.xml' exists with a Spinner id 'layerSpinner'\n    val inflater = LayoutInflater.from(context)\n    val view = inflater.inflate(com.atakmap.android.plugin.R.layout.plugin_tool_layout, null)\n\n    val spinner: Spinner = view.findViewById(com.atakmap.android.plugin.R.id.layerSpinner)\n    val options = listOf(\"Layer A\", \"Layer B\", \"Layer C\")\n    \n    // Use ATAK context for styling if available, otherwise plugin context\n    val adapter = ArrayAdapter(context, android.R.layout.simple_spinner_item, options)\n    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n    spinner.adapter = adapter\n\n    return view\n}"}
{"instruction": "Write a basic ATAK `MapComponent` in Java that adds a custom marker to the map center upon startup.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\n\npublic class SimpleMarkerComponent implements MapComponent {\n    private MapView mapView;\n    private Marker customMarker;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        this.mapView = view;\n        \n        // Create a marker at the center of the map\n        GeoPoint center = view.getCenterCoordinate();\n        customMarker = new Marker(center, \"uid-1234\");\n        customMarker.setTitle(\"Plugin Marker\");\n        customMarker.setType(\"a-u-G\"); // Friendly unit\n        \n        // Add to map\n        view.getRootGroup().addItem(customMarker);\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {\n        if (customMarker != null) {\n            view.getRootGroup().removeItem(customMarker);\n        }\n    }\n\n    @Override\n    public void onStart(Context context, MapView view) {}\n    @Override\n    public void onStop(Context context, MapView view) {}\n    @Override\n    public void onPause(Context context, MapView view) {}\n    @Override\n    public void onResume(Context context, MapView view) {}\n}"}
{"instruction": "Implement a `DropDownReceiver` for an ATAK plugin that inflates a layout file named `plugin_layout.xml` when the tool is activated.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport com.atakmap.android.dropdown.DropDownReceiver;\nimport com.atakmap.android.maps.MapView;\n\npublic class PluginDropDownReceiver extends DropDownReceiver {\n    private final View pluginView;\n    private final Context pluginContext;\n\n    public PluginDropDownReceiver(MapView mapView, Context context) {\n        super(mapView);\n        this.pluginContext = context;\n        // Inflate the view from the plugin context, not the main ATAK context\n        this.pluginView = LayoutInflater.from(pluginContext).inflate(com.myplugin.R.layout.plugin_layout, null);\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (!isClosed()) {\n            // If already open, ignore or toggle\n            return;\n        }\n        setRetain(true);\n        showDropDown(pluginView, 0.5, FULL_WIDTH, FULL_HEIGHT);\n    }\n\n    @Override\n    public void disposeImpl() {\n        // Cleanup resources\n    }\n}"}
{"instruction": "Register a listener in an ATAK plugin to intercept incoming Cursor on Target (CoT) events with the type 'a-f-G-U-C'.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.android.cot.CotMapComponent;\nimport com.atakmap.android.maps.MapView;\n\npublic class CotListenerComponent {\n    private final MapView mapView;\n    private final CotMapComponent.CotEventListener cotListener;\n\n    public CotListenerComponent(MapView mapView) {\n        this.mapView = mapView;\n        \n        this.cotListener = new CotMapComponent.CotEventListener() {\n            @Override\n            public void onCotEvent(CotEvent event, Bundle extra) {\n                if (event.getType().equals(\"a-f-G-U-C\")) {\n                    // Handle the specific CoT event here\n                    String callsign = event.getUID();\n                    // Process data...\n                }\n            }\n        };\n    }\n\n    public void register() {\n        CotMapComponent.getInstance().addCotEventListener(cotListener);\n    }\n\n    public void unregister() {\n        CotMapComponent.getInstance().removeCotEventListener(cotListener);\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin Lifecycle class that displays a Toast message when the plugin is loaded.", "output": "package com.atakmap.android.helloworld.plugin;\n\nimport android.content.Context;\nimport android.widget.Toast;\nimport com.atakmap.android.maps.MapActivity;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.coremap.log.Log;\nimport transapps.maps.plugin.lifecycle.Lifecycle;\n\npublic class HelloWorldLifecycle implements Lifecycle {\n    private final Context pluginContext;\n    private MapView mapView;\n\n    public HelloWorldLifecycle(Context context) {\n        this.pluginContext = context;\n    }\n\n    @Override\n    public void onCreate(final android.app.Activity arg0, final transapps.mapi.plugin.Context arg1) {\n        if (arg0 instanceof MapActivity) {\n            this.mapView = ((MapActivity) arg0).getMapView();\n            arg0.runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    Toast.makeText(mapView.getContext(), \"Hello World Plugin Loaded\", Toast.LENGTH_LONG).show();\n                }\n            });\n        }\n    }\n\n    @Override\n    public void onDestroy() {\n        // Cleanup resources\n    }\n\n    @Override\n    public void onStart() {}\n\n    @Override\n    public void onPause() {}\n\n    @Override\n    public void onResume() {}\n\n    @Override\n    public void onStop() {}\n\n    @Override\n    public void onConfigurationChanged(android.content.res.Configuration arg0) {}\n}"}
{"instruction": "Create a Kotlin function to programmatically add a `SpotMapItem` (a marker) to the ATAK MapView at a specific coordinate.", "output": "import com.atakmap.android.maps.MapView\nimport com.atakmap.android.maps.SpotMapItem\nimport com.atakmap.coremap.maps.coords.GeoPoint\nimport com.atakmap.coremap.maps.coords.GeoPointMetaData\nimport java.util.UUID\n\nfun addMarkerToMap(mapView: MapView, lat: Double, lon: Double, title: String) {\n    val point = GeoPoint(lat, lon)\n    val item = SpotMapItem(UUID.randomUUID().toString(), null, title)\n    \n    // Set the location\n    val geoPointMetaData = GeoPointMetaData.wrap(point)\n    item.point = geoPointMetaData\n    \n    // Set type (e.g., neutral point of interest)\n    item.type = \"u-d-p\"\n    item.visible = true\n    \n    // Add to the map's root group\n    mapView.rootGroup.addItem(item)\n}"}
{"instruction": "Define an Android XML Layout resource for an ATAK plugin tool that contains a Spinner and a Button.", "output": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"\n    android:padding=\"10dp\"\n    android:background=\"#CC000000\">\n\n    <TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Plugin Tool\" \n        android:textColor=\"#FFFFFF\"/>\n\n    <Spinner\n        android:id=\"@+id/pluginSpinner\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"10dp\" />\n\n    <Button\n        android:id=\"@+id/actionButton\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Execute\"\n        android:layout_marginTop=\"10dp\" />\n\n</LinearLayout>"}
{"instruction": "Implement a basic ATAK (Android Team Awareness Kit) `MapComponent` class structure that logs when the plugin is created and destroyed.", "output": "package com.atakmap.android.helloworld.plugin;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.coremap.log.Log;\n\npublic class HelloWorldMapComponent implements MapComponent {\n\n    private static final String TAG = \"HelloWorldMapComponent\";\n    private Context pluginContext;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        // Context of the plugin package\n        this.pluginContext = context;\n        Log.d(TAG, \"Plugin created\");\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {\n        Log.d(TAG, \"Plugin destroyed\");\n    }\n\n    @Override\n    public void onStart(Context context, MapView view) {}\n\n    @Override\n    public void onStop(Context context, MapView view) {}\n    \n    @Override\n    public void onPause(Context context, MapView view) {}\n\n    @Override\n    public void onResume(Context context, MapView view) {}\n}"}
{"instruction": "Write a Kotlin code snippet to programmatically add a `Marker` (CoT item) to the ATAK map at a specific coordinate.", "output": "import com.atakmap.android.maps.MapView\nimport com.atakmap.android.maps.Marker\nimport com.atakmap.coremap.maps.coords.GeoPoint\nimport com.atakmap.coremap.maps.assets.Icon\nimport java.util.UUID\n\nfun addMarkerToMap(mapView: MapView, lat: Double, lon: Double, title: String) {\n    val point = GeoPoint(lat, lon)\n    val uid = UUID.randomUUID().toString()\n    \n    val marker = Marker(point, uid)\n    marker.title = title\n    marker.type = \"a-u-G\" // Atom, unit, Ground\n    marker.setMetaString(\"how\", \"h-g-i-g-o\")\n    \n    // Refresh the map group to display the marker\n    mapView.rootGroup.addItem(marker)\n}"}
{"instruction": "Write an ATAK plugin code snippet to register a `BroadcastReceiver` that listens for a custom dropdown menu selection.", "output": "import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport com.atakmap.android.ipc.AtakBroadcast;\nimport com.atakmap.coremap.log.Log;\n\npublic class DropdownReceiver extends BroadcastReceiver {\n    public static final String DROPDOWN_ACTION = \"com.atakmap.android.myplugin.DROPDOWN_SELECT\";\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (DROPDOWN_ACTION.equals(intent.getAction())) {\n            String selectedUid = intent.getStringExtra(\"targetUID\");\n            Log.d(\"Plugin\", \"Dropdown selected for item: \" + selectedUid);\n        }\n    }\n\n    // Registering the receiver (usually in MapComponent)\n    public void register(Context context) {\n        AtakBroadcast.DocumentedIntentFilter filter = new AtakBroadcast.DocumentedIntentFilter();\n        filter.addAction(DROPDOWN_ACTION);\n        AtakBroadcast.getInstance().registerReceiver(this, filter);\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin Lifecycle class in Kotlin that logs when the plugin is loaded and unloaded.", "output": "package com.atakmap.android.helloworld.plugin\n\nimport com.atakmap.android.maps.MapActivity\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.log.Log\nimport com.atakmap.app.system.SystemComponent\nimport android.content.Context\n\nclass HelloWorldLifecycle(private val context: Context) : SystemComponent {\n\n    private var mapView: MapView? = null\n\n    override fun onCreate(context: Context, intent: android.content.Intent, view: MapView, args: android.os.Bundle?) {\n        // Called when the plugin is initialized\n        this.mapView = view\n        Log.d(TAG, \"HelloWorld Plugin Loaded\")\n        \n        // Initialize tools, overlays, or receivers here\n    }\n\n    override fun onDestroy(context: Context, view: MapView) {\n        // Called when the plugin is unloaded\n        Log.d(TAG, \"HelloWorld Plugin Unloaded\")\n        \n        // Clean up resources\n        this.mapView = null\n    }\n\n    override fun onStart(context: Context, view: MapView) {}\n    override fun onStop(context: Context, view: MapView) {}\n    override fun onPause(context: Context, view: MapView) {}\n    override fun onResume(context: Context, view: MapView) {}\n\n    companion object {\n        private const val TAG = \"HelloWorldLifecycle\"\n    }\n}"}
{"instruction": "Create a function in ATAK (Kotlin) to construct and broadcast a basic 'Friendly' Cursor on Target (CoT) event at a specific lat/lon.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.comms.CommsMapComponent\nimport com.atakmap.coremap.maps.time.CoordinatedTime\n\nfun broadcastFriendlyCoT(lat: Double, lon: Double, uid: String) {\n    val event = CotEvent()\n    val time = CoordinatedTime()\n    \n    event.version = \"2.0\"\n    event.uid = uid\n    event.type = \"a-f-G-U-C\" // Atom, Friendly, Ground, Unit, Combat\n    event.time = time\n    event.start = time\n    event.stale = time.addMinutes(10)\n    event.how = \"h-g-i-g-o\" // Human input\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n\n    if (CommsMapComponent.getDispatcher() != null) {\n        CommsMapComponent.getDispatcher().dispatch(event)\n    }\n}"}
{"instruction": "Create an ATAK DropDownReceiver in Kotlin to show a custom view when a specific tool is activated from the toolbar.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.View\nimport android.view.LayoutInflater\nimport com.atakmap.android.dropdown.DropDownReceiver\nimport com.atakmap.android.maps.MapView\n\nclass MyPluginDropDown(mapView: MapView, private val context: Context) : \n    DropDownReceiver(mapView) {\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (!isClosed) {\n            closeDropDown()\n            return\n        }\n        \n        // Inflate your custom layout\n        // Ensure you have a layout file named plugin_layout.xml\n        // val view = LayoutInflater.from(this.context).inflate(R.layout.plugin_layout, null)\n        \n        // For demo, we just use a generic View if layout isn't present in this snippet\n        val view = View(this.context)\n        \n        showDropDown(view, 0.5, true, -1.0, -1.0)\n    }\n\n    override fun disposeImpl() {\n        // Cleanup resources\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin MapComponent in Java that registers a DropDownReceiver for a custom tool.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.dropdown.DropDownMapComponent;\n\npublic class MyPluginMapComponent extends DropDownMapComponent {\n    private Context pluginContext;\n\n    public void onCreate(Context context, Intent intent, MapView view) {\n        context.setTheme(R.style.ATAKPluginTheme);\n        super.onCreate(context, intent, view);\n        this.pluginContext = context;\n        \n        // Register the dropdown receiver\n        MyDropDownReceiver receiver = new MyDropDownReceiver(view, context);\n        this.registerReceiver(context, receiver, new MyDropDownReceiver.IntentFilter());\n    }\n\n    @Override\n    protected void onDestroyImpl(Context context, MapView view) {\n        super.onDestroyImpl(context, view);\n    }\n}"}
{"instruction": "Write an ATAK plugin snippet in Java to listen for incoming Cursor on Target (CoT) events using the CotDispatcher.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.comms.CotDispatcher;\nimport com.atakmap.android.cot.CotMapComponent;\n\npublic class CotListener implements CotDispatcher.CotEventListener {\n    \n    public void register(CotMapComponent cotMapComponent) {\n        cotMapComponent.getDispatcher().addCotEventListener(this);\n    }\n\n    @Override\n    public void onCotEvent(CotEvent event) {\n        if (event.getType().startsWith(\"a-f-G\")) {\n             // Handle friendly ground unit events\n             String uid = event.getUID();\n             // Process event...\n        }\n    }\n}"}
{"instruction": "Write an ATAK (Android Team Awareness Kit) plugin snippet to programmatically create a 'Hostile' CoT (Cursor on Target) event at a specific lat/lon and dispatch it to the internal map bus.", "output": "// Import ATAK Core classes\nimport com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.maps.time.CoordinatedTime\nimport com.atakmap.comms.CotMapComponent\n\nfun dispatchHostileCot(lat: Double, lon: Double, uid: String) {\n    val event = CotEvent()\n    \n    // Set CoT attributes\n    event.version = \"2.0\"\n    event.uid = uid\n    event.type = \"a-h-G\" // Atom - Hostile - Ground\n    event.time = CoordinatedTime()\n    event.start = CoordinatedTime()\n    event.stale = CoordinatedTime(System.currentTimeMillis() + 10 * 60 * 1000) // 10 mins stale\n    event.how = \"h-g-i-g-o\" // Machine generated\n\n    // Set Location\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n\n    // Dispatch internally to ATAK\n    val dispatcher = CotMapComponent.getInternalDispatcher()\n    if (dispatcher != null) {\n        dispatcher.dispatch(event)\n    }\n}"}
{"instruction": "Write an ATAK plugin `MapComponent` snippet that adds a simple red circle marker to the map view at a hardcoded coordinate.", "output": "import com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.maps.MapGroup;\n\npublic class SimpleMarkerComponent implements MapComponent {\n    private MapView mapView;\n    private MapGroup mapGroup;\n    private Marker myMarker;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        this.mapView = view;\n        this.mapGroup = view.getRootGroup();\n\n        // Create a marker\n        myMarker = new Marker(new GeoPoint(35.0, -78.0)); // Hardcoded coord\n        myMarker.setTitle(\"Plugin Marker\");\n        myMarker.setType(\"u-r-A-M-H\"); // Arbitrary type\n        myMarker.setMetaString(\"color\", \"-65536\"); // Red color int\n\n        // Add to map\n        mapGroup.addItem(myMarker);\n    }\n\n    @Override\n    public void onDestroyImpl(Context context, MapView view) {\n        if (myMarker != null) {\n            mapGroup.removeItem(myMarker);\n        }\n    }\n    \n    @Override\n    public void onStart(Context context, MapView view) {}\n    @Override\n    public void onStop(Context context, MapView view) {}\n    @Override\n    public void onPause(Context context, MapView view) {}\n    @Override\n    public void onResume(Context context, MapView view) {}\n}"}
{"instruction": "Write an ATAK Plugin code snippet to register a new Tool (icon) in the ATAK Toolbar that shows a Toast message when clicked.", "output": "import com.atakmap.android.ipc.AtakBroadcast;\nimport com.atakmap.android.toolbar.Tool;\nimport com.atakmap.android.toolbar.ToolDescriptor;\nimport com.atakmap.android.toolbar.ToolManagerBroadcastReceiver;\nimport android.widget.Toast;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\n\npublic class ToastTool extends Tool {\n\n    private final Context context;\n\n    public ToastTool(Context context) {\n        this.context = context;\n        // Register the tool with a unique identifier\n        ToolManagerBroadcastReceiver.getInstance().registerTool(\n            \"my.unique.toast.tool\", \n            new ToolDescriptor(\"Show Toast\", null, null, null, null)\n        );\n    }\n\n    @Override\n    public void onToolStart(Bundle extras) {\n        // Action when tool is clicked/activated\n        Toast.makeText(context, \"ATAK Tool Clicked!\", Toast.LENGTH_SHORT).show();\n        \n        // Immediately deactivate so it acts like a button, not a toggle\n        Intent intent = new Intent(\"com.atakmap.android.toolbar.DEACTIVATE_TOOL\");\n        intent.putExtra(\"tool\", \"my.unique.toast.tool\");\n        AtakBroadcast.getInstance().sendBroadcast(intent);\n    }\n\n    @Override\n    public void onToolStop(Bundle extras) {\n    }\n}"}
{"instruction": "Implement a basic ATAK (Android Team Awareness Kit) Plugin `MapOverlay` in Java that adds a red circle marker to the map at a specific coordinate.", "output": "import com.atakmap.android.maps.MapGroup;\nimport com.atakmap.android.maps.MapItem;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.maps.DefaultMapGroup;\n\npublic class SimpleMarkerOverlay {\n\n    private final MapView mapView;\n    private final MapGroup mapGroup;\n\n    public SimpleMarkerOverlay(MapView view) {\n        this.mapView = view;\n        this.mapGroup = new DefaultMapGroup(\"My Plugin Group\");\n        this.mapView.getRootGroup().addGroup(mapGroup);\n    }\n\n    public void addRedMarker(double lat, double lon) {\n        GeoPoint point = new GeoPoint(lat, lon);\n        Marker marker = new Marker(point, \"my-unique-uid\");\n        marker.setType(\"a-f-G-U-C\"); // Standard hostile ground unit type or custom\n        marker.setTitle(\"Target Alpha\");\n        marker.setMetaString(\"color\", \"-65536\"); // Red color ARGB\n        \n        // Add to the map group to render\n        mapGroup.addItem(marker);\n    }\n\n    public void removeOverlay() {\n        mapGroup.clearItems();\n        this.mapView.getRootGroup().removeGroup(mapGroup);\n    }\n}"}
{"instruction": "Implement a `DropDownReceiver` in Java for an ATAK plugin to display a custom tool layout when a toolbar button is clicked.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport com.atakmap.android.dropdown.DropDown.OnStateListener;\nimport com.atakmap.android.dropdown.DropDownReceiver;\nimport com.atakmap.android.maps.MapView;\n\npublic class MyPluginDropDownReceiver extends DropDownReceiver implements OnStateListener {\n\n    private final View myView;\n    private final Context pluginContext;\n\n    public MyPluginDropDownReceiver(MapView mapView, Context context) {\n        super(mapView);\n        this.pluginContext = context;\n        // Inflate your custom layout XML\n        LayoutInflater inflater = LayoutInflater.from(context);\n        this.myView = inflater.inflate(R.layout.my_plugin_layout, null);\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (!isClosed()) {\n            closeDropDown();\n        } else {\n            showDropDown(myView, 0.5, FULL_WIDTH, FULL_HEIGHT);\n        }\n    }\n\n    @Override\n    public void disposeImpl() {\n        // Cleanup resources\n    }\n\n    @Override\n    public void onDropDownSelectionRemoved() {\n        // Handle closing logic\n    }\n}"}
{"instruction": "Create an ATAK plugin listener in Java that listens for incoming Cursor-on-Target (CoT) messages.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.android.cot.CotMapComponent;\nimport com.atakmap.android.cot.CotServiceRemote;\nimport android.os.Bundle;\n\npublic class MyCotListener implements CotServiceRemote.CotEventListener {\n\n    public void register() {\n        CotMapComponent.getInstance().getService().addCotEventListener(this);\n    }\n\n    public void unregister() {\n        CotMapComponent.getInstance().getService().removeCotEventListener(this);\n    }\n\n    @Override\n    public void onCotEvent(CotEvent event, Bundle extra) {\n        // Process the incoming CoT event\n        String type = event.getType();\n        String uid = event.getUID();\n        \n        if (type.startsWith(\"a-f\")) { // Example: Filter for friendly units\n             System.out.println(\"Received Friendly CoT: \" + uid);\n        }\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) DropDownReceiver implementation in Java to display a native view tool.", "output": "import com.atakmap.android.dropdown.DropDownReceiver;\nimport com.atakmap.android.maps.MapView;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.view.View;\nimport android.widget.TextView;\n\npublic class MyPluginDropDown extends DropDownReceiver {\n    private View myView;\n    private Context pluginContext;\n\n    public MyPluginDropDown(MapView mapView, Context context) {\n        super(mapView);\n        this.pluginContext = context;\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (!isVisible()) {\n            showDropDown(getDropDownView(), HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT);\n        } else {\n            closeDropDown();\n        }\n    }\n\n    private View getDropDownView() {\n        if (myView == null) {\n            // In a real plugin, inflate layout via LayoutInflater\n            TextView tv = new TextView(pluginContext);\n            tv.setText(\"Hello ATAK Plugin\");\n            myView = tv;\n        }\n        return myView;\n    }\n\n    @Override\n    public void disposeImpl() {\n        myView = null;\n    }\n}"}
{"instruction": "Write a Java snippet for an ATAK Plugin that broadcasts a 'Cursor on Target' (CoT) presence event programmatically.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.coremap.cot.event.CotPoint;\nimport com.atakmap.comms.CotDispatcher;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.coremap.maps.time.CoordinatedTime;\n\npublic void sendPresenceCot(MapView mapView) {\n    CotEvent event = new CotEvent();\n    CoordinatedTime time = new CoordinatedTime();\n    \n    event.setVersion(\"2.0\");\n    event.setUID(\"My-Plugin-Unit-ID\");\n    event.setType(\"a-f-G-U-C\"); // Atom, Friendly, Ground, Unit, Combat\n    event.setTime(time);\n    event.setStart(time);\n    event.setStale(time.addMilliseconds(60000));\n    event.setHow(\"m-g\");\n    \n    // Set location (Lat, Lon, HAE, CE, LE)\n    event.setPoint(new CotPoint(34.0, -118.0, 0.0, 10.0, 10.0));\n\n    CotDispatcher dispatcher = mapView.getMapEventDispatcher();\n    if (dispatcher != null) {\n        dispatcher.dispatch(event);\n    }\n}"}
{"instruction": "Write a Java snippet for an ATAK Plugin to add a Marker (MapItem) to the MapView root group.", "output": "import com.atakmap.android.maps.Marker;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.icons.UserIcon;\n\npublic void addMarkerToMap(MapView mapView) {\n    // Create a generic marker at a specific lat/lon\n    Marker marker = new Marker(new GeoPoint(40.7128, -74.0060), \"unique_marker_uid\");\n    \n    marker.setTitle(\"Target Alpha\");\n    marker.setType(\"a-u-G\"); // Atom, Unknown, Ground\n    marker.setMetaBoolean(\"readiness\", true);\n    \n    // Add to the main map group so it renders\n    mapView.getRootGroup().addItem(marker);\n    \n    // Optional: Refresh the map\n    mapView.postInvalidate();\n}"}
{"instruction": "Write the `PluginLifeCycle` class for a basic ATAK (Android Team Awareness Kit) plugin that displays a Toast message when the plugin is loaded.", "output": "package com.atakmap.android.helloworld.plugin;\n\nimport android.content.Context;\nimport android.widget.Toast;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.app.system.SystemComponent;\nimport com.atakmap.coremap.log.Log;\n\npublic class HelloWorldLifecycle implements SystemComponent {\n\n    private final Context pluginContext;\n    private MapView mapView;\n\n    public HelloWorldLifecycle(Context context) {\n        this.pluginContext = context;\n    }\n\n    @Override\n    public void onCreate(Context context, MapView view, Bundle savedInstanceState) {\n        this.mapView = view;\n        // Ensure we run on UI thread for Toasts\n        view.post(() -> Toast.makeText(view.getContext(), \"Hello World Plugin Loaded\", Toast.LENGTH_LONG).show());\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {\n        // Cleanup resources here\n    }\n\n    @Override\n    public void onStart(Context context, MapView view) {}\n\n    @Override\n    public void onStop(Context context, MapView view) {}\n\n    @Override\n    public void onPause(Context context, MapView view) {}\n\n    @Override\n    public void onResume(Context context, MapView view) {}\n}"}
{"instruction": "Implement an ATAK plugin snippet to register a listener for incoming Cursor on Target (CoT) events.", "output": "import com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.comms.CotServiceRemote;\nimport com.atakmap.comms.CotServiceRemote.CotEventListener;\n\n// Inside your plugin initialization or tool class\npublic void registerCotListener() {\n    CotServiceRemote.getInstance().addCotEventListener(new CotEventListener() {\n        @Override\n        public void onCotEvent(CotEvent event, Bundle extra) {\n            // Filter for a specific type, e.g., hostile atoms\n            if (event.getType().startsWith(\"a-h\")) {\n                Log.d(\"ATAK_PLUGIN\", \"Hostile CoT received: \" + event.getUID());\n            }\n        }\n    });\n}"}
{"instruction": "Implement a custom ATAK Map Widget (Button) that toggles a boolean state when clicked.", "output": "import com.atakmap.android.widgets.MapWidget;\nimport com.atakmap.android.widgets.RootLayoutWidget;\nimport com.atakmap.android.widgets.WidgetBackground;\nimport android.graphics.Color;\nimport android.view.MotionEvent;\n\npublic class ToggleWidget extends MapWidget {\n    private boolean isActive = false;\n\n    public ToggleWidget(RootLayoutWidget root) {\n        setName(\"ToggleWidget\");\n        RootLayoutWidget.LayoutParams lp = new RootLayoutWidget.LayoutParams(\n                0, 0, 150, 150);\n        setLayoutParams(lp);\n        setBackground(new WidgetBackground(Color.GRAY));\n        \n        addOnWidgetClickListener(new OnWidgetClickListener() {\n            @Override\n            public void onWidgetClick(MapWidget widget) {\n                isActive = !isActive;\n                setBackground(new WidgetBackground(isActive ? Color.GREEN : Color.GRAY));\n            }\n        });\n    }\n}"}
{"instruction": "Develop a basic ATAK (Android Team Awareness Kit) Plugin Tool class that logs a message when the tool is activated.", "output": "package com.atakmap.android.myplugin;\n\nimport com.atakmap.android.ipc.AtakBroadcast;\nimport com.atakmap.android.tools.Tool;\nimport com.atakmap.coremap.log.Log;\nimport android.content.Intent;\nimport android.os.Bundle;\n\npublic class MySimpleTool extends Tool {\n\n    private static final String TAG = \"MySimpleTool\";\n\n    public MySimpleTool(final android.content.Context context) {\n        // The intent string used to activate this tool\n        super(context, \"com.atakmap.android.myplugin.SHOW_TOOL\");\n    }\n\n    @Override\n    public void onToolBegin(Bundle extras) {\n        Log.d(TAG, \"MySimpleTool has been activated by the user.\");\n        // Request to open a specific view or perform an action here\n    }\n\n    @Override\n    public void onToolEnd() {\n        Log.d(TAG, \"MySimpleTool has been deactivated.\");\n    }\n}"}
{"instruction": "Write an ATAK plugin snippet to programmatically create a 'Hostile' CoT (Cursor on Target) marker and place it on the map.", "output": "import com.atakmap.coremap.cot.event.CotDetail;\nimport com.atakmap.coremap.cot.event.CotEvent;\nimport com.atakmap.coremap.cot.event.CotPoint;\nimport com.atakmap.coremap.maps.time.CoordinatedTime;\n\npublic void createHostileMarker(double lat, double lon) {\n    CotEvent event = new CotEvent();\n    \n    // Set time\n    CoordinatedTime time = new CoordinatedTime();\n    event.setTime(time);\n    event.setStart(time);\n    event.setStale(time.addMilliseconds(60000)); // Stale in 1 min\n\n    // Set UID and Type (a-h-G = Atom, Hostile, Ground)\n    event.setUID(java.util.UUID.randomUUID().toString());\n    event.setType(\"a-h-G\");\n    event.setHow(\"h-g-i-g-o\"); // Human, ground, imaginary, generated, other\n\n    // Set Location\n    event.setPoint(new CotPoint(lat, lon, 0.0, 10.0, 10.0));\n\n    // Dispatch event to the map\n    if (event.isValid()) {\n        com.atakmap.android.cot.CotMapComponent.getExternalDispatcher().dispatch(event);\n    }\n}"}
{"instruction": "Create an ATAK plugin DropDownReceiver that inflates a custom XML layout when a specific intent is fired.", "output": "package com.atakmap.android.myplugin;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport com.atakmap.android.dropdown.DropDownReceiver;\nimport com.atakmap.android.maps.MapView;\n\npublic class MyDropDownReceiver extends DropDownReceiver {\n    private final View myView;\n    private final Context pluginContext;\n\n    public MyDropDownReceiver(final MapView mapView, final Context context) {\n        super(mapView);\n        this.pluginContext = context;\n        \n        // Inflate view from plugin context resources\n        LayoutInflater inflater = LayoutInflater.from(pluginContext);\n        this.myView = inflater.inflate(R.layout.my_plugin_layout, null);\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (!isClosed()) {\n            // If already open, ignore or toggle\n            return;\n        }\n        // Show the dropdown\n        setRetain(true);\n        showDropDown(myView, HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT);\n    }\n\n    @Override\n    public void disposeImpl() {\n        // Cleanup resources\n    }\n}"}
{"instruction": "ATAK Plugin (Java): Create a basic `MapComponent` that registers a BroadcastReceiver to listen for a specific custom intent action.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.ipc.AtakBroadcastReceiver;\nimport com.atakmap.android.ipc.DocumentedIntentFilter;\n\npublic class CustomReceiverComponent implements MapComponent {\n    private Context pluginContext;\n    private MyReceiver receiver;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        this.pluginContext = context;\n        this.receiver = new MyReceiver();\n        \n        DocumentedIntentFilter filter = new DocumentedIntentFilter();\n        filter.addAction(\"com.atakmap.plugin.MY_CUSTOM_ACTION\");\n        AtakBroadcastReceiver.registerReceiver(view.getContext(), receiver, filter);\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {\n        if (receiver != null) {\n            AtakBroadcastReceiver.unregisterReceiver(view.getContext(), receiver);\n        }\n    }\n\n    @Override\n    public void onStart(Context context, MapView view) {}\n\n    @Override\n    public void onStop(Context context, MapView view) {}\n    \n    @Override\n    public void onPause(Context context, MapView view) {}\n\n    @Override\n    public void onResume(Context context, MapView view) {}\n\n    private class MyReceiver extends AtakBroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            // Handle the intent\n        }\n    }\n}"}
{"instruction": "ATAK Plugin (Kotlin): Implement a Dropdown Receiver to show a native Android View within the ATAK Dropdown interface.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.View\nimport android.widget.TextView\nimport com.atakmap.android.dropdown.Dropdown.OnStateListener\nimport com.atakmap.android.dropdown.DropdownReceiver\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.log.Log\n\nclass MyPluginDropdown(mapView: MapView, private val pluginContext: Context) : \n    DropdownReceiver(mapView), OnStateListener {\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (!isClosed) {\n            closeDropDown()\n        } else {\n            showDropDown(createView(), 0.5, -1.0, -1.0, 0.5)\n        }\n    }\n\n    private fun createView(): View {\n        val textView = TextView(pluginContext)\n        textView.text = \"Hello from ATAK Plugin\"\n        textView.textSize = 20f\n        return textView\n    }\n\n    override fun onDropdownClosed() {\n        Log.d(\"MyPlugin\", \"Dropdown closed\")\n    }\n\n    override fun disposeImpl() {}\n}"}
{"instruction": "ATAK Plugin (Java): Add a custom icon to the ATAK toolbar that activates a tool.", "output": "import android.content.Context;\nimport android.content.Intent;\nimport android.graphics.drawable.Drawable;\nimport com.atakmap.android.ipc.AtakBroadcast;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.toolbar.Tool;\nimport com.atakmap.android.toolbar.ToolManagerBroadcastReceiver;\n\npublic class ToolbarTool implements Tool, MapComponent {\n    private Context context;\n    private MapView mapView;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        this.context = context;\n        this.mapView = view;\n        \n        // Register the tool with the ToolManager\n        Intent toolIntent = new Intent(ToolManagerBroadcastReceiver.TOOL_REGISTER);\n        toolIntent.putExtra(\"tool\", (android.os.Parcelable)this);\n        AtakBroadcast.getInstance().sendBroadcast(toolIntent);\n    }\n\n    @Override\n    public String getIdentifier() {\n        return \"my_custom_tool\";\n    }\n\n    @Override\n    public Drawable getIcon() {\n        // Return a drawable from resources\n        return context.getDrawable(android.R.drawable.ic_menu_compass);\n    }\n\n    @Override\n    public void onToolStart() {\n        // Action when tool icon is clicked\n    }\n\n    @Override\n    public void onToolStop() {\n        // Cleanup\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {}\n    @Override\n    public void onStart(Context context, MapView view) {}\n    @Override\n    public void onStop(Context context, MapView view) {}\n    @Override\n    public void onPause(Context context, MapView view) {}\n    @Override\n    public void onResume(Context context, MapView view) {}\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) MapComponent class structure required for a plugin entry point.", "output": "package com.atakmap.android.plugintemplate\n\nimport android.content.Context\nimport android.content.Intent\nimport com.atakmap.android.maps.AbstractMapComponent\nimport com.atakmap.android.maps.MapView\n\nclass PluginMapComponent : AbstractMapComponent() {\n\n    override fun onCreate(context: Context, intent: Intent, view: MapView) {\n        // Initialize plugin components, tools, and overlays here\n    }\n\n    override fun onDestroyImpl(context: Context, view: MapView) {\n        // Cleanup resources, remove receivers and listeners\n    }\n\n    override fun onStart(context: Context, view: MapView) {\n        // Called when the plugin is started\n    }\n\n    override fun onStop(context: Context, view: MapView) {\n        // Called when the plugin is stopped\n    }\n}"}
{"instruction": "Generate a programmatic 'Cursor on Target' (CoT) Event for a hostile unit at a specific Lat/Lon in ATAK using Kotlin.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.maps.time.CoTPoint\n\nfun createHostileCotEvent(lat: Double, lon: Double, uid: String): CotEvent {\n    val event = CotEvent()\n    event.version = \"2.0\"\n    event.uid = uid\n    event.type = \"a-h-G\" // Atom - Hostile - Ground\n    event.time = CoTPoint(System.currentTimeMillis())\n    event.start = CoTPoint(System.currentTimeMillis())\n    event.stale = CoTPoint(System.currentTimeMillis() + 60000) // 1 minute stale\n    event.how = \"h-g-i-g-o\" // Human input\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n    \n    return event\n}"}
{"instruction": "Implement a simplified ATAK `DropDownReceiver` to show a custom tool view when an icon is clicked in the toolbar.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.View\nimport com.atakmap.android.dropdown.DropDownReceiver\nimport com.atakmap.android.maps.MapView\n\nclass MyPluginDropDownReceiver(mapView: MapView, context: Context) : \n    DropDownReceiver(mapView) {\n\n    private val myView: View = View.inflate(context, R.layout.my_plugin_layout, null)\n\n    override fun disposeImpl() {\n        // Clean up resources\n    }\n\n    override fun onReceive(context: Context, intent: Intent) {\n        if (!isClosed) {\n            closeDropDown()\n        } else {\n            showDropDown(myView, 0.5, FULL_WIDTH, FULL_HEIGHT)\n        }\n    }\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin `MapComponent` in Kotlin that logs a message when the plugin is added to the map.", "output": "package com.atakmap.android.plugintemplate\n\nimport android.content.Context\nimport android.content.Intent\nimport com.atakmap.android.maps.MapComponent\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.log.Log\n\nclass PluginMapComponent : MapComponent {\n    private var context: Context? = null\n\n    override fun onCreate(context: Context, intent: Intent, view: MapView) {\n        this.context = context\n        Log.d(\"PluginMapComponent\", \"Plugin created and added to MapView\")\n        \n        // Initialize custom tools or overlays here\n    }\n\n    override fun onDestroy(context: Context, view: MapView) {\n        Log.d(\"PluginMapComponent\", \"Plugin destroyed\")\n        // Cleanup resources\n    }\n\n    override fun onStart(context: Context, view: MapView) {}\n    override fun onStop(context: Context, view: MapView) {}\n    override fun onPause(context: Context, view: MapView) {}\n    override fun onResume(context: Context, view: MapView) {}\n}"}
{"instruction": "Write a Kotlin function to programmatically generate a basic 'Cursor on Target' (CoT) event for ATAK.", "output": "import com.atakmap.coremap.cot.event.CotDetail\nimport com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.maps.time.CoTPointData\n\nfun createSelfCotEvent(lat: Double, lon: Double, uid: String): CotEvent {\n    val event = CotEvent()\n    event.version = \"2.0\"\n    event.uid = uid\n    event.type = \"a-f-G-U-C\" // Friendly Ground Unit Combatant\n    event.time = CoTPointData.now()\n    event.start = CoTPointData.now()\n    event.stale = CoTPointData.now() + (10 * 60 * 1000) // 10 minutes from now\n    event.how = \"h-e\" // Human entered\n\n    // Set location\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n\n    // Add details\n    val detail = CotDetail(\"detail\")\n    val contact = CotDetail(\"contact\")\n    contact.setAttribute(\"callsign\", \"Alpha-1\")\n    detail.addChild(contact)\n    event.detail = detail\n\n    return event\n}"}
{"instruction": "Implement an ATAK `DropDownReceiver` in Kotlin to handle a tool interaction when a specific intent is broadcast.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.View\nimport com.atakmap.android.dropdown.DropDownReceiver\nimport com.atakmap.android.maps.MapView\n\nclass MyPluginDropDownReceiver(mapView: MapView, context: Context) : \n    DropDownReceiver(mapView) {\n\n    override fun onReceive(context: Context, intent: Intent) {\n        if (intent.action == \"com.atakmap.android.myplugin.SHOW_DROPDOWN\") {\n            if (!isClosed) {\n                // Already open\n                return\n            }\n            // Create your view content here\n            // val myView = ... \n            // showDropDown(myView, HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT)\n        }\n    }\n\n    override fun disposeImpl() {\n        // Cleanup resources\n    }\n\n    override fun onStateRequested(state: Int) {\n        if (state == DropDownReceiver.DROPDOWN_STATE_FULLSCREEN) {\n            // Handle resize request\n        }\n    }\n}"}
{"instruction": "Implement a basic ATAK MapComponent in Kotlin to register a tool in the overflow menu.", "output": "import android.content.Context\nimport android.content.Intent\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.android.ipc.AtakBroadcast\nimport com.atakmap.android.dropdown.DropDownMapComponent\nimport com.atakmap.app.preferences.ToolsPreferenceFragment\n\nclass PluginMapComponent : DropDownMapComponent() {\n    private var context: Context? = null\n\n    override fun onCreate(context: Context, intent: Intent, view: MapView) {\n        super.onCreate(context, intent, view)\n        this.context = context\n        \n        // Register a tool (icon) in the ATAK tool menu\n        ToolsPreferenceFragment.register(\n            ToolsPreferenceFragment.ToolPreference(\n                \"My Plugin Tool\",\n                \"Description of my tool\",\n                \"my.plugin.action\",\n                context.resources.getDrawable(R.drawable.ic_launcher),\n                null\n            )\n        )\n    }\n\n    override fun onDestroyImpl(context: Context, view: MapView) {\n        super.onDestroyImpl(context, view)\n    }\n}"}
{"instruction": "Generate and dispatch a 'friendly' CoT (Cursor on Target) event programmatically within an ATAK plugin.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.maps.time.CoordinatedTime\nimport com.atakmap.android.cot.CotMapComponent\n\nfun broadcastSelfCot() {\n    val event = CotEvent()\n    val time = CoordinatedTime()\n    \n    event.version = \"2.0\"\n    event.uid = \"my-plugin-generated-uid\"\n    event.type = \"a-f-G-U-C\" // Atom: friendly, Ground unit, Combat\n    event.time = time\n    event.start = time\n    event.stale = time.addMinutes(10)\n    event.how = \"m-g\" // machine-generated\n    \n    // Set location (Lat, Lon, HAE, CE, LE)\n    event.point = CotPoint(34.0522, -118.2437, 100.0, 10.0, 10.0)\n\n    // Dispatch the event internally to ATAK\n    CotMapComponent.getInternalDispatcher().dispatch(event)\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin `MapComponent` in Java. This component should register a BroadcastReceiver to listen for a specific intent when the plugin is loaded.", "output": "import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.MapComponent;\nimport com.atakmap.coremap.log.Log;\n\npublic class MyPluginMapComponent implements MapComponent {\n    private Context context;\n    private PluginReceiver receiver;\n\n    @Override\n    public void onCreate(Context context, Intent intent, MapView view) {\n        this.context = context;\n        this.receiver = new PluginReceiver();\n        context.registerReceiver(receiver, new IntentFilter(\"com.atakmap.android.myplugin.ACTION\"));\n        Log.d(\"MyPlugin\", \"MapComponent created and receiver registered\");\n    }\n\n    @Override\n    public void onDestroy(Context context, MapView view) {\n        if (receiver != null) {\n            context.unregisterReceiver(receiver);\n        }\n    }\n\n    @Override\n    public void onStart(Context context, MapView view) {}\n    @Override\n    public void onStop(Context context, MapView view) {}\n    @Override\n    public void onPause(Context context, MapView view) {}\n    @Override\n    public void onResume(Context context, MapView view) {}\n\n    private class PluginReceiver extends BroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            // Handle custom plugin action\n        }\n    }\n}"}
{"instruction": "Create an ATAK (Android) code snippet to add a custom item to the ATAK 'Radial Menu' when a map item is clicked. This is a common plugin task for context-specific actions.", "output": "import com.atakmap.android.menu.MapMenuReceiver;\nimport com.atakmap.android.menu.MapMenuWidget;\nimport com.atakmap.android.maps.MapItem;\nimport android.content.Intent;\n\n// Inside your MapComponent or initialization logic\nMapMenuReceiver.getInstance().registerMapMenuListener(new MapMenuReceiver.MapMenuListener() {\n    @Override\n    public boolean onShowMenu(MapItem item, MapMenuWidget menu) {\n        if (item.getType().equals(\"b-m-p-s-p-loc\")) { // Example: Only for specific markers\n             // Create intent for the action\n             Intent actionIntent = new Intent(\"com.myplugin.DO_SOMETHING\");\n             actionIntent.putExtra(\"targetUID\", item.getUID());\n             \n             // Add button to the radial menu\n             menu.addButton(\n                 \"/u/my_plugin_menu\", \n                 \"/assets/icon.png\", // Path to icon in assets\n                 actionIntent\n             );\n             return true; // Menu modified\n        }\n        return false;\n    }\n});"}
{"instruction": "Write a Java snippet for an ATAK (Android Team Awareness Kit) plugin to programmatically place a red Marker on the map at specific coordinates.", "output": "import com.atakmap.android.maps.MapGroup;\nimport com.atakmap.android.maps.MapView;\nimport com.atakmap.android.maps.Marker;\nimport com.atakmap.coremap.maps.coords.GeoPoint;\nimport com.atakmap.android.user.PlacePointTool;\n\npublic void addRedMarker(MapView mapView, double lat, double lon) {\n    // Create the point\n    GeoPoint point = new GeoPoint(lat, lon);\n    \n    // Create a generic marker using the PlacePointTool logic or direct instantiation\n    Marker marker = new Marker(point, java.util.UUID.randomUUID().toString());\n    marker.setType(\"a-u-G\"); // Atom, Unit, Ground (standard MilStd 2525)\n    marker.setTitle(\"Target Alpha\");\n    marker.setMetaString(\"color\", -65536); // Red color int\n    \n    // Add to the root map group\n    MapGroup rootGroup = mapView.getRootGroup();\n    rootGroup.addItem(marker);\n    \n    // Refresh the item\n    marker.persist(mapView.getMapEventDispatcher(), null, this.getClass());\n}"}
{"instruction": "Create a basic ATAK `Tool` implementation in Java that logs a message when the tool is activated from the toolbar.", "output": "import com.atakmap.android.ipc.AtakBroadcast;\nimport com.atakmap.android.toolbar.Tool;\nimport com.atakmap.android.toolbar.ToolManagerBroadcastReceiver;\nimport android.os.Bundle;\nimport android.util.Log;\nimport com.atakmap.android.maps.MapView;\n\npublic class MyPluginTool extends Tool {\n\n    private final MapView mapView;\n\n    public MyPluginTool(MapView mapView) {\n        this.mapView = mapView;\n    }\n\n    @Override\n    public boolean onToolStart(Bundle extras) {\n        Log.d(\"MyPlugin\", \"Tool Activated!\");\n        // Logic to show UI or start interaction goes here\n        return true;\n    }\n\n    @Override\n    public void onToolStop() {\n        Log.d(\"MyPlugin\", \"Tool Deactivated!\");\n    }\n    \n    // Usually registered via ToolManagerBroadcastReceiver inside the plugin lifecycle\n}"}
{"instruction": "Write a Kotlin snippet for an ATAK plugin that constructs and broadcasts a 'GeoChat' CoT (Cursor on Target) message.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.coremap.cot.event.CotDetail\nimport com.atakmap.android.cot.CotMapComponent\nimport com.atakmap.coremap.maps.time.CoTPointData\n\nfun sendGeoChatMessage(message: String, lat: Double, lon: Double, uid: String) {\n    val event = CotEvent()\n    event.version = \"2.0\"\n    event.uid = java.util.UUID.randomUUID().toString()\n    event.type = \"b-t-f\" // Basic Chat Type\n    event.time = CoTPointData.now()\n    event.start = CoTPointData.now()\n    event.stale = CoTPointData.now() + (1000 * 60 * 5) // 5 mins stale\n    event.how = \"h-g-i-g-o\"\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n\n    val detail = CotDetail(\"detail\")\n    val remarks = CotDetail(\"remarks\")\n    remarks.innerText = message\n    remarks.setAttribute(\"source\", uid)\n    detail.addChild(remarks)\n    \n    // ATAK specific chat structure usually requires a __chat parent, simplified here\n    val chatNode = CotDetail(\"__chat\")\n    chatNode.setAttribute(\"parent\", \"Root\")\n    chatNode.setAttribute(\"chatroom\", \"All Chat Rooms\")\n    chatNode.setAttribute(\"id\", uid)\n    chatNode.setAttribute(\"senderCallsign\", \"MyPlugin\")\n    detail.addChild(chatNode)\n\n    event.detail = detail\n\n    // Dispatch\n    CotMapComponent.getInternalDispatcher().dispatch(event)\n}"}
{"instruction": "Create a basic ATAK (Android Team Awareness Kit) Plugin Lifecycle class that logs a message when the plugin is loaded.", "output": "package com.atakmap.android.helloworld.plugin\n\nimport com.atakmap.android.maps.MapComponent\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.coremap.log.Log\nimport transapps.maps.plugin.lifecycle.Lifecycle\nimport android.content.Context\n\nclass HelloWorldLifecycle : Lifecycle {\n    private val TAG = \"HelloWorldLifecycle\"\n    private var mapComponent: MapComponent? = null\n\n    override fun onConfigurationChanged(p0: android.content.res.Configuration?) {}\n\n    override fun onCreate(activityContext: android.app.Activity?, transappsMapper: transapps.mapi.MapView?) {\n        Log.d(TAG, \"Plugin Created\")\n        if (transappsMapper == null || activityContext == null) return\n        \n        // ATAK MapView extraction\n        val mapView = transappsMapper.view as? MapView\n        mapView?.let {\n            mapComponent = HelloWorldMapComponent(activityContext, it)\n            mapComponent?.onCreate(activityContext, activityContext.intent, it)\n        }\n    }\n\n    override fun onDestroy() {\n        mapComponent?.onDestroy(null, null)\n    }\n\n    override fun onPause() {}\n    override fun onResume() {}\n    override fun onStart() {}\n    override fun onStop() {}\n    override fun onFinish() {}\n}"}
{"instruction": "Write an ATAK code snippet to programmatically dispatch a 'Spot Map' CoT (Cursor on Target) event to place a marker on the map.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotPoint\nimport com.atakmap.comms.CotMapComponent\nimport com.atakmap.coremap.maps.time.CoordinatedTime\n\nfun placeMarker(lat: Double, lon: Double, callsign: String) {\n    val event = CotEvent()\n    event.type = \"a-u-G\"\n    event.uid = java.util.UUID.randomUUID().toString()\n    event.time = CoordinatedTime()\n    event.start = CoordinatedTime()\n    event.stale = CoordinatedTime().addMinutes(10)\n    event.how = \"h-g-i-g-o\"\n    event.point = CotPoint(lat, lon, 0.0, 10.0, 10.0)\n    \n    event.setDetail(com.atakmap.coremap.cot.event.CotDetail(\"detail\").apply {\n        addChild(com.atakmap.coremap.cot.event.CotDetail(\"contact\").apply {\n            setAttribute(\"callsign\", callsign)\n        })\n    })\n\n    CotMapComponent.getInternalDispatcher().dispatch(event)\n}"}
{"instruction": "Create an ATAK DropDownReceiver class (Kotlin) used to handle UI interactions when a tool is activated.", "output": "import android.content.Context\nimport android.content.Intent\nimport android.view.View\nimport com.atakmap.android.maps.MapView\nimport com.atakmap.android.dropdown.DropDownReceiver\n\nclass MyPluginDropDownReceiver(mapView: MapView, context: Context) : \n    DropDownReceiver(mapView) {\n\n    private val pluginContext: Context = context\n\n    override fun onReceive(context: Context?, intent: Intent?) {\n        if (intent?.action == \"com.atakmap.android.myplugin.SHOW_TOOL\") {\n            if (!isClosed) {\n                 // Already open, close it or toggle\n                closeDropDown()\n            } else {\n                setRetain(true)\n                // Inflate your custom view here\n                // val v = LayoutInflater.from(pluginContext).inflate(R.layout.my_view, null)\n                // showDropDown(v, HALF_WIDTH, FULL_HEIGHT, FULL_WIDTH, HALF_HEIGHT)\n            }\n        }\n    }\n\n    override fun disposeImpl() {\n        // Cleanup resources\n    }\n}"}
{"instruction": "Create a basic ATAK MapWidget in Kotlin that displays a red text label saying \"Status: Active\" at the top left of the map.", "output": "import com.atakmap.android.widgets.MapWidget\nimport com.atakmap.android.widgets.TextWidget\nimport android.graphics.Color\n\nclass StatusMapWidget : MapWidget() {\n    init {\n        name = \"Status Widget\"\n        val textWidget = TextWidget(\"Status: Active\", _face)\n        textWidget.color = Color.RED\n        // Set position relative to top-left\n        textWidget.point.set(10f, 10f)\n        this.addWidget(textWidget)\n    }\n}"}
{"instruction": "Write an ATAK plugin snippet in Kotlin to register a listener for all incoming Cursor on Target (CoT) events.", "output": "import com.atakmap.coremap.cot.event.CotEvent\nimport com.atakmap.coremap.cot.event.CotEventListener\nimport com.atakmap.comms.CotServiceRemote\n\nclass MyCotListener : CotEventListener {\n    override fun onCotEvent(event: CotEvent?, source: Any?) {\n        if (event != null) {\n            // Process the CoT event (e.g., check UID or type)\n            val type = event.type\n            val uid = event.uid\n        }\n    }\n}\n\n// Usage within Plugin Lifecycle\n// CotServiceRemote.getInstance().addCotEventListener(myCotListener)"}
{"instruction": "Define an ATAK `Tool` class in Kotlin that opens a custom \"Mission Planner\" view when the tool icon is clicked in the radial menu.", "output": "import com.atakmap.android.ipc.AtakBroadcast\nimport com.atakmap.android.tools.Tool\nimport android.content.Intent\nimport android.graphics.drawable.Drawable\n\nclass MissionPlannerTool(private val context: android.content.Context) : Tool {\n\n    override fun getName(): String = \"Mission Planner\"\n\n    override fun getIcon(): Drawable? {\n        // Return drawable resource here\n        return null \n    }\n\n    override fun onToolClicked() {\n        // Broadcast intent to open the specific plugin view\n        val intent = Intent(\"com.myplugin.OPEN_MISSION_PLANNER\")\n        AtakBroadcast.getInstance().sendBroadcast(intent)\n    }\n}"}
